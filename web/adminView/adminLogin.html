<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>管理员登录</title>
    <!--layui CSS-->
    <link href="../static/layui/css/layui.css" rel="stylesheet"/>
    <!--Jquery-->
    <script src="../static/jquery/jquery-3.3.1.min.js"></script>
    <!--link css-->
    <link href="../static/css/adminLogin.css" rel="stylesheet"/>
    <!--icon 覆盖-->
    <link rel="shortcut icon" href="#"/>
</head>
<script type="text/javascript">
    $(document).ready(function () {
        //按钮点击确认登录
        $("#adminLogin").click(function () {
            $.ajax({
                url: "/admin/adminLogin",
                type: "POST",
                data: {
                    "serialNumber": $("#serialNumber").val(),
                    "newPassword": $("#newPassword").val()
                },
                success(data) {
                    if (data == 0) {
                        alert("登入失败，请检查登陆身份");
                        window.location.reload();
                    } else {
                        //进入主页面
                        alert("登入成功,请妥善管理");
                        location.href = "main.html";
                    }
                },
                error() {
                    alert("登入失败，请检查网络设置");
                    window.location.reload();
                }
            })
        });
        //enter键绑定确认提交
        $(document).keydown(function (event) {
            if (event.keyCode == 13) {
                document.getElementById("adminLogin").click();
            }
        })
    });
</script>
<body>
<div class="admin-form">
    <fieldset class="layui-elem-field layui-field-title">
        <legend>金小泽--后台管理</legend>
        <div class="layui-field-box">
            <div class="layui-form">
                <div class="layui-form-item layui-form-pane">
                    <label class="layui-form-label layui-icon la">&#xe66f;</label>
                    <div class="layui-input-inline">
                        <input type="text" name="serialNumber" id="serialNumber" lay-verify="required" placeholder="请输入账号"
                               class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item layui-form-pane">
                    <label class="layui-form-label layui-icon la">&#xe673;</label>
                    <div class="layui-input-inline">
                        <input type="password" name="newPassword" id="newPassword" lay-verify="required"
                               placeholder="请输入密码"
                               class="layui-input">
                    </div>
                    <div class="layui-form-mid layui-word-aux font-color"><span>*请在无人偷看时输入</span></div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-inline">
                        <button class="layui-btn" type="button" id="adminLogin" lay-submit lay-filter="formDemo">立即提交
                        </button>
                        <button class="layui-btn layui-btn-danger" type="reset">重置
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </fieldset>
</div>
<script src="../static/layui/layui.js"></script>
<script>
    //Demo
    layui.use('form', function () {
        var form = layui.form;
        //监听提交
        form.on('submit(formDemo)', function (data) {
            //文字弹窗，获取文本弹窗
            // layer.msg(JSON.stringify(data.field));
            return false;
        });
    });
</script>
</body>
</html>
